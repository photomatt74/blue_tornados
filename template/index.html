<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8 />
    <title>Draft</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

    <style>
        body {
            margin: 0;
            padding: 0;
            background: whitesmoke;
            font-family: Lato, sans-serif;
            color: #0D0000;
        }

        header,
        footer,
        section {
            padding: 6px 10%;
            margin: 0 auto;
            width: 80%
        }

        h1 {
            display: inline-block;
            margin-right: 20px;
            color: #001323;
        }

        h2 {
            display: inline-block;
            color: #001323;
        }

        #map {
            width: 80%;
            height: 740px;
            margin: 10px 10%;
            background: whitesmoke;
            border: 2px solid #dddedf;
        }

        a {
            color: #004A8B;
        }

        a:hover {
            color: rgb(67, 69, 71);
            text-decoration: none;
        }

        p {
            font-size: 1em;
            color: #001323;
        }

        .legend {
            padding: 6px 8px;
            font-size: 1em;
            /* Use transparency to blend elements. */
            border: 2px solid rgba(145, 168, 153, 0.2);
            background: rgba(233, 232, 232, 0.9);
            color: rgba(0, 0, 0, 0.8);
            border-radius: 5px;
        }

        .legend h3 {
            font-size: 1.3em;
            font-weight: bolder;
            color: rgb(4, 4, 4);
            /* Light */
            margin: 0 0 10px 0;
        }

        .legend span {
            width: 20px;
            height: 20px;
            float: left;
            margin: 0 10px 4px 0;
        }

        .legend label {
            font-size: 1em;
        }

        .legend label:after {
            content: ' ';
            display: block;
            clear: both;
        }

        .leaflet-bar a {
            /* Override the default style for Leaflet's zoom  */
            background: rgba(100, 100, 100, 0.9);
            color: rgba(244, 244, 244, 0.8);
        }

        footer {
            padding: 6px 10%;
            width: 80%;
        }

        p {
            font-size: 1em;
            color: #001323;
        }
    </style>
</head>

<body>
    <header>
        <h1>Kentucky Tornados:</h1>
        <h2>It's Weird Weather</h2>
    </header>

    <div id='map'></div>
    <footer>
        <p>Map authored by Matt Barton</p>
        <p>This map will show tornados in Kentucky by decade.
        </p>
    </footer>

    <!-- Load scripts using Subresource Integrity (SRI) is a security feature 
      that enables browsers to verify that resources they fetch (from a CDN) 
      are delivered without unexpected manipulation. -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>
    <script src="data/tornados.geojson">
    </script>

    <script>
        var map = L.map('map', {
            center: [37.8, -85.8], // centered in Kentucky
            zoom: 7
        });

        var tiles = L.tileLayer(
            'https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/dark_all/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
                subdomains: 'abcd',
                maxZoom: 19
            });
        tiles.addTo(map);

        // Global vars

        // $.getJSON("data/counties_median_rent_2015.json", function (data) {
        //   // just need some outlines
        //   L.geoJson(data, {
        //     style: function (feature) {
        //       return {
        //         color: '#dddddd',
        //         weight: 1,
        //         fillOpacity: 1,
        //         fillColor: '#2ca25f'
        //       };
        //     }
        //   }).addTo(map);  // L.geoJson ends
        // });

        var commonStyles = {
            stroke: true,
            fill: true,
            fillOpacity: .8,
            radius: 2000,

        }; // styles closed

        var dataLayer = L.geoJson(tornados, {
            pointToLayer: function (feature, latlng) {
                return L.circle(latlng, commonStyles);
            }
        }); // close datalayer
        dataLayer.addTo(map);

        //tornados.features[0].properties.CZ_NAME_STR
        // drawMap(dataLayer);

        function drawMap(dataLayer) {

            dataLayer.eachLayer(function (layer) {

                var props = layer.feature.properties;

                // define toolTipInfo
                var content = `${props.CZ_NAME_STR}`;

                layer.bindTooltip(content);

                layer.on('mouseover', function () {
                    layer.setStyle({
                        fillColor: 'yellow'
                    });
                });
                layer.on('mouseout', function () {
                    layer.setStyle({
                        fillColor: 'green'
                    });
                });

            }); // close each layer
        }; // close drawMap
    </script>

</body>

</html>